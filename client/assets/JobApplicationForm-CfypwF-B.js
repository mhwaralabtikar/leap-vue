import{b as H,d as se,u as ae,r as I,ac as re,A as f,f as o,k as e,l as s,e as b,v as _,m as n,j as t,t as u,s as v,p as C,a8 as T,N as le,a7 as ie,ad as D,_ as oe}from"./index-Ck4Sddnw.js";import{t as ne,z as h,u as de,F as me,a as x,_ as j,b as k,c as N,C as q,d as w,e as ue,f as ce,g as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-Buzagt0T.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-BLh8-g8b.js";import{_ as U}from"./index-bMUsnnO9.js";import{C as fe}from"./circle-alert-55OBAY61.js";import{X as pe}from"./x-C6SBmc-u.js";import{S as be}from"./send-CYEAKrKT.js";import{C as ve}from"./circle-check-big-Dd3zt_UR.js";/**
 * @license lucide-vue-next v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=H("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.508.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=H("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),he={key:0,class:"bg-destructive/10 border border-destructive/30 text-destructive dark:text-destructive/90 rounded-lg p-3 mb-3 flex items-start text-sm rtl:text-right"},_e={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xe={class:"relative"},je={key:0,class:"absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"},ke={class:"relative"},Ne={key:0,class:"absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"},we={class:"relative"},$e={key:0,class:"absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"},Ce={class:"relative"},Fe={key:0,class:"absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"},Se={class:"flex flex-col space-y-2"},Ie={class:"text-sm text-muted-foreground mt-2"},Ae={key:1,class:"flex items-center justify-between p-3 border border-border rounded-lg bg-muted/30"},Le={class:"flex items-center"},Te={class:"text-sm truncate max-w-[200px]"},qe={class:"space-y-1 leading-none"},Me={class:"space-y-1 leading-none"},Pe={class:"mt-4 flex justify-end rtl:justify-start"},Ee={key:0,class:"flex items-center justify-center"},Be={key:1,class:"flex items-center justify-center"},De={key:3,class:"bg-green-500/10 border border-green-500/30 text-green-700 dark:text-green-400 rounded-lg p-3 flex items-center rtl:text-right"},Oe={class:"flex items-center"},Re={class:"text-sm"},Ve=se({__name:"JobApplicationForm",props:{jobId:{type:String,required:!0},jobTitle:{type:String,default:""},compact:{type:Boolean,default:!1}},emits:["success","error","cancel"],setup(M,{expose:J,emit:X}){const P=M,O=X,{t:g}=ae(),c=I(!1),E=I(!1),F=I(!1),L=I(""),S=I(null),Y=ne(h.object({firstName:h.string().min(2,g("jobs.form.errors.firstNameRequired")),lastName:h.string().min(2,g("jobs.form.errors.lastNameRequired")),email:h.string().email(g("jobs.form.errors.validEmail")),phone:h.string().min(5,g("jobs.form.errors.validPhone")),resume:h.instanceof(File,{message:g("jobs.form.errors.resumeRequired")}),coverLetter:h.string().optional(),eligibilityConfirmed:h.boolean().refine(r=>r===!0,{message:g("jobs.form.errors.eligibilityRequired")||"You must confirm your eligibility to work"}),privacyAgreed:h.boolean().refine(r=>r===!0,{message:g("jobs.form.errors.privacyRequired")})})),{handleSubmit:Z,errors:m,validate:G,validateField:B,setFieldValue:R,resetForm:K}=de({validationSchema:Y}),i=re({firstName:"",lastName:"",email:"",phone:"",resume:null,coverLetter:"",privacyAgreed:!1,eligibilityConfirmed:!1});async function $(r,a){i[r]=a,R(r,a),D(async()=>{await B(r)})}function Q(){S.value&&S.value.click()}function W(r){const a=r.target;if(a.files&&a.files.length>0){const l=a.files[0];i.resume=l,D(async()=>{R("resume",l),await B("resume")})}}function ee(){i.resume=null,S.value&&(S.value.value=""),D(async()=>{await B("resume",void 0)})}function V(){i.firstName="",i.lastName="",i.email="",i.phone="",i.resume=null,i.coverLetter="",i.privacyAgreed=!1,i.eligibilityConfirmed=!1,E.value=!1,F.value=!1,K()}const te=Z(async r=>{try{if(c.value=!0,F.value=!1,!(await G()).valid){F.value=!0,L.value=g("jobs.form.errors.formErrors");return}const l=new FormData;l.append("jobId",P.jobId),P.jobTitle&&l.append("jobTitle",P.jobTitle),Object.entries(r).forEach(([y,p])=>{p!=null&&(y==="resume"&&p instanceof File?l.append(y,p,p.name):l.append(y,String(p)))}),await new Promise(y=>setTimeout(y,1500));const d={id:Math.random().toString(36).substring(2),status:"submitted",submittedAt:new Date().toISOString(),...Object.fromEntries(Object.entries(r).map(([y,p])=>y==="resume"&&p instanceof File?[y,p.name]:[y,p]))};E.value=!0,O("success",d),setTimeout(()=>{V()},2e3)}catch(a){console.error("Error submitting application:",a),F.value=!0,L.value=g("jobs.form.errors.submissionError"),O("error",L.value)}finally{c.value=!1}});return J({resetFormFields:V}),(r,a)=>(o(),f(e(me),{onSubmit:e(te),class:"space-y-4"},{default:s(()=>[F.value?(o(),b("div",he,[t(e(fe),{class:"h-4 w-4 ltr:mr-2 rtl:ml-2 mt-0.5 flex-shrink-0"}),n("span",null,u(L.value||"Please check the form for errors and try again."),1)])):_("",!0),n("div",_e,[t(e(x),{name:"firstName"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.firstName"))+" ",1),a[7]||(a[7]=n("span",{class:"text-primary"},"*",-1))]),_:1}),n("div",xe,[t(e(N),null,{default:s(()=>[t(e(A),{id:l.name,name:l.name,value:i.firstName,onInput:a[0]||(a[0]=d=>$("firstName",d.target.value)),placeholder:r.$t("jobs.form.firstNamePlaceholder"),class:C({"border-destructive focus:ring-destructive/40":e(m).firstName,"border-green-500/50 focus:ring-green-500/40":i.firstName&&!e(m).firstName}),disabled:c.value},null,8,["id","name","value","placeholder","class","disabled"])]),_:2},1024),i.firstName?(o(),b("div",je,[e(m).firstName?(o(),f(e(q),{key:1,class:"h-4 w-4 text-destructive"})):(o(),f(e(T),{key:0,class:"h-4 w-4 text-green-500"}))])):_("",!0)]),t(e(w))]),_:2},1024)]),_:1}),t(e(x),{name:"lastName"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.lastName"))+" ",1),a[8]||(a[8]=n("span",{class:"text-primary"},"*",-1))]),_:1}),n("div",ke,[t(e(N),null,{default:s(()=>[t(e(A),{id:l.name,name:l.name,value:i.lastName,onInput:a[1]||(a[1]=d=>$("lastName",d.target.value)),placeholder:r.$t("jobs.form.lastNamePlaceholder"),class:C({"border-destructive focus:ring-destructive/40":e(m).lastName,"border-green-500/50 focus:ring-green-500/40":i.lastName&&!e(m).lastName}),disabled:c.value},null,8,["id","name","value","placeholder","class","disabled"])]),_:2},1024),i.lastName?(o(),b("div",Ne,[e(m).lastName?(o(),f(e(q),{key:1,class:"h-4 w-4 text-destructive"})):(o(),f(e(T),{key:0,class:"h-4 w-4 text-green-500"}))])):_("",!0)]),t(e(w))]),_:2},1024)]),_:1})]),t(e(x),{name:"email"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.email"))+" ",1),a[9]||(a[9]=n("span",{class:"text-primary"},"*",-1))]),_:1}),n("div",we,[t(e(N),null,{default:s(()=>[t(e(A),{id:l.name,name:l.name,value:i.email,onInput:a[2]||(a[2]=d=>$("email",d.target.value)),type:"email",placeholder:r.$t("jobs.form.emailPlaceholder"),class:C({"border-destructive focus:ring-destructive/40":e(m).email,"border-green-500/50 focus:ring-green-500/40":i.email&&!e(m).email}),disabled:c.value},null,8,["id","name","value","placeholder","class","disabled"])]),_:2},1024),i.email?(o(),b("div",$e,[e(m).email?(o(),f(e(q),{key:1,class:"h-4 w-4 text-destructive"})):(o(),f(e(T),{key:0,class:"h-4 w-4 text-green-500"}))])):_("",!0)]),t(e(w))]),_:2},1024)]),_:1}),t(e(x),{name:"phone"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.phone"))+" ",1),a[10]||(a[10]=n("span",{class:"text-primary"},"*",-1))]),_:1}),n("div",Ce,[t(e(N),null,{default:s(()=>[t(e(A),{id:l.name,name:l.name,value:i.phone,onInput:a[3]||(a[3]=d=>$("phone",d.target.value)),type:"tel",placeholder:r.$t("jobs.form.phonePlaceholder"),class:C({"border-destructive focus:ring-destructive/40":e(m).phone,"border-green-500/50 focus:ring-green-500/40":i.phone&&!e(m).phone}),disabled:c.value},null,8,["id","name","value","placeholder","class","disabled"])]),_:2},1024),i.phone?(o(),b("div",Fe,[e(m).phone?(o(),f(e(q),{key:1,class:"h-4 w-4 text-destructive"})):(o(),f(e(T),{key:0,class:"h-4 w-4 text-green-500"}))])):_("",!0)]),t(e(w))]),_:2},1024)]),_:1}),t(e(x),{name:"resume"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.resume"))+" ",1),a[11]||(a[11]=n("span",{class:"text-primary"},"*",-1))]),_:1}),n("div",Se,[i.resume?(o(),b("div",Ae,[n("div",Le,[t(e(ye),{class:"h-5 w-5 text-primary mr-2"}),n("span",Te,u(i.resume.name),1)]),t(e(U),{type:"button",variant:"ghost",size:"sm",onClick:ee,disabled:c.value},{default:s(()=>[t(e(pe),{class:"h-4 w-4"})]),_:1},8,["disabled"])])):(o(),b("div",{key:0,class:C(["border-2 border-dashed border-border rounded-lg p-4 text-center cursor-pointer hover:border-primary/50 transition-colors",{"border-destructive":e(m).resume}]),onClick:Q},[t(e(ge),{class:"h-6 w-6 mx-auto text-muted-foreground"}),n("p",Ie,u(r.$t("jobs.form.resumePrompt")),1)],2)),t(e(N),null,{default:s(()=>[t(e(A),{ref_key:"fileInput",ref:S,type:"file",class:"hidden",accept:".pdf,.doc,.docx",onChange:W,disabled:c.value},null,8,["disabled"])]),_:1}),t(e(w))])]),_:1})]),_:1}),M.compact?_("",!0):(o(),f(e(x),{key:1,name:"coverLetter"},{default:s(({field:l})=>[t(e(j),null,{default:s(()=>[t(e(k),null,{default:s(()=>[v(u(r.$t("jobs.form.coverLetter")),1)]),_:1}),t(e(N),null,{default:s(()=>[t(e(ue),{id:l.name,name:l.name,value:i.coverLetter,onInput:a[4]||(a[4]=d=>$("coverLetter",d.target.value)),placeholder:r.$t("jobs.form.coverLetterPlaceholder"),class:"min-h-[120px]",disabled:c.value},null,8,["id","name","value","placeholder","disabled"])]),_:2},1024),t(e(ce),{class:"text-xs"},{default:s(()=>[v(u(r.$t("jobs.form.coverLetterDescription")||"Optional, but recommended"),1)]),_:1}),t(e(w))]),_:2},1024)]),_:1})),M.compact?_("",!0):(o(),f(e(x),{key:2,name:"eligibilityConfirmed"},{default:s(({field:l})=>[t(e(j),{class:"flex flex-row items-start space-x-3 space-y-0"},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(z),{id:l.name,name:l.name,checked:i.eligibilityConfirmed,"onUpdate:checked":a[5]||(a[5]=d=>$("eligibilityConfirmed",d)),disabled:c.value},null,8,["id","name","checked","disabled"])]),_:2},1024),n("div",qe,[t(e(k),{class:"text-sm cursor-pointer"},{default:s(()=>[v(u(r.$t("jobs.form.eligibility")||"I confirm I am legally eligible to work in this country"),1)]),_:1}),t(e(w))])]),_:2},1024)]),_:1})),t(e(x),{name:"privacyAgreed"},{default:s(({field:l})=>[t(e(j),{class:"flex flex-row items-start rtl:space-x-reverse space-x-3 space-y-0"},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(z),{id:l.name,name:l.name,checked:i.privacyAgreed,"onUpdate:checked":a[6]||(a[6]=d=>$("privacyAgreed",d)),disabled:c.value,class:C({"border-destructive":e(m).privacyAgreed})},null,8,["id","name","checked","disabled","class"])]),_:2},1024),n("div",Me,[t(e(k),{class:"text-sm",innerHTML:r.$t("jobs.form.privacyPolicyMini")},null,8,["innerHTML"]),t(e(w))])]),_:2},1024)]),_:1}),n("div",Pe,[le(r.$slots,"buttons",{},()=>[t(e(U),{type:"submit",disabled:c.value,class:"w-full"},{default:s(()=>[c.value?(o(),b("span",Ee,[t(e(ie),{class:"animate-spin ltr:mr-2 rtl:ml-2 h-4 w-4"}),v(" "+u(r.$t("jobs.form.submitting")),1)])):(o(),b("span",Be,[t(e(be),{class:"ltr:mr-2 rtl:ml-2 h-4 w-4 rtl:rotate-180"}),v(" "+u(r.$t("jobs.form.submit")),1)]))]),_:1},8,["disabled"])],!0)]),E.value?(o(),b("div",De,[n("div",Oe,[t(e(ve),{class:"h-5 w-5 ltr:mr-2 rtl:ml-2"}),n("p",Re,u(r.$t("jobs.form.successMessage")),1)])])):_("",!0)]),_:3},8,["onSubmit"]))}}),Ke=oe(Ve,[["__scopeId","data-v-89188d62"]]);export{Ke as J};
